name: Deploy Dev Ubuntu

on:
  push:
    branches:
      - dev-app  # Se ejecuta solo cuando haces push a esta rama
  workflow_dispatch:  # Permite ejecutar manualmente el workflow desde GitHub

jobs:
  deploy:
    runs-on: self-hosted  # Esto le indica a GitHub que ejecute este trabajo en un runner local (Ubuntu)

    steps:
      - name: Checkout the repo
        uses: actions/checkout@v4
        with:
          fetch-depth: 0  # Aseg√∫rate de traer todo el historial

      - name: Run deploy script
        run: sudo /srv/deploy/pull-deploy.sh  # Ejecuta tu script de despliegue en Ubuntu
